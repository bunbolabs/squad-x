cidl: '0.8'
info:
  name: squad_x
  title: Squad X
  version: 0.0.3
  contact:
    name: BunBoLabs
    git: https://github.com/bunbolabs/squad-x
  license:
    name: MIT
    url: https://opensource.org/license/mit

types:
  Users:
    summary: Users data structure
    solana:
      owner: self
      seeds:
        - name: 'USERS'
        - name: signer
          type: sol:pubkey
    fields:
      - name: display_name
        type: string
        solana:
          attributes: [cap:36]

      - name: xp
        type: u16
        description: The user's XP.

      - name: badge
        type: string
        description: The user's badge.
        solana:
          attributes: [cap:96]

      - name: squad
        type: sol:pubkey
        description: Reference to user's Squad account.

  Squads:
    summary: Squads data structure.
    solana:
      seeds:
        - name: 'SQUADS'
        - name: user
          type: sol:pubkey

    fields:
      - name: display_name
        type: string
        solana:
          attributes: [cap:36]

      - name: motto
        type: string
        solana:
          attributes: [cap:255]

      - name: members
        type: u16

      - name: xp
        type: u16

      - name: badge
        type: string
        description: The squad's badge.
        solana:
          attributes: [cap:96]

      - name: authority
        type: sol:pubkey
        description: The authority of the squad.

  Quests:
    summary: Quests data structure.

    fields:
      - name: name
        type: string
        solana:
          attributes: [cap:255]

      - name: description
        type: string
        solana:
          attributes: [cap:255]

      - name: tag
        type: string
        solana:
          attributes: [cap:32]

      - name: reward
        type: u16

methods:
  - name: create_user_account
    summary: Create new user account.
    inputs:
      - name: user
        type: Users
        solana:
          attributes: [init]

      - name: display_name
        type: string

  - name: create_squad_account
    summary: Create new squad account.
    inputs:
      - name: author
        type: Users
      - name: squad
        type: Squads
        solana:
          attributes: [init]
          seeds:
            user: author

      - name: display_name
        type: string

      - name: motto
        type: string
