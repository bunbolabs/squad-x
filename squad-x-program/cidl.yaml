cidl: '0.8'
info:
  name: squad_x
  title: Squad X
  version: 0.0.3
  summary: |-
    The purpose of this contract is to track the income and outcome of a given user. For this contract, we are going to 
    target the Solana blockchain. Thus, we define the data structure **Record** that will be transpile to a PDA Account 
    base on the seeds defined in the solana extension. In addition, the contract defines three methods, also known as 
    instruction; through this method, we add behavior.

  contact:
    name: SquadX
    git: https://github.com/bunbolabs/squad-x
  license:
    name: MIT
    url: https://opensource.org/license/mit

types:
  User:
    summary: User data structure
    solana:
      owner: self
      seeds:
        - name: 'USER'
        - name: signer
          type: sol:pubkey
    fields:
      - name: display_name
        type: string
        solana:
          attributes: [cap:36]

      - name: xp
        type: u16
        description: The user's XP.

      - name: badge
        type: string
        description: The user's badge.
        solana:
          attributes: [cap:96]

      - name: avatar
        type: sol:pubkey
        description: Reference to user's Avatar account.

      - name: squad
        type: sol:pubkey
        description: Reference to user's Squad account.

  Avatar:
    summary: Avatar data structure.
    solana:
      seeds:
        - name: 'AVATAR'
        - name: user
          type: sol:pubkey

    fields:
      - name: damage
        type: u8

      - name: energy
        type: u8

      - name: xp
        type: u16

      - name: authority
        type: sol:pubkey
        description: The authority of the avatar.

  Squad:
    summary: Squad data structure.
    solana:
      seeds:
        - name: 'SQUAD'
        - name: user
          type: sol:pubkey

    fields:
      - name: display_name
        type: string
        solana:
          attributes: [cap:36]

      - name: motto
        type: string
        solana:
          attributes: [cap:255]

      - name: members
        type: u16

      - name: xp
        type: u16

      - name: badge
        type: string
        description: The user's badge.
        solana:
          attributes: [cap:96]

      - name: authority
        type: sol:pubkey
        description: The authority of the squad.

methods:
  - name: create_user_account
    summary: Create new user account.
    inputs:
      - name: user
        type: User
        solana:
          attributes: [init]

      - name: display_name
        type: string

  - name: create_avatar_account
    summary: Create new avatar account.
    inputs:
      - name: author
        type: User
      - name: avatar
        type: Avatar
        solana:
          attributes: [init]
          seeds:
            user: author

  - name: create_squad_account
    summary: Create new squad account.
    inputs:
      - name: author
        type: User
      - name: squad
        type: Squad
        solana:
          attributes: [init]
          seeds:
            user: author

      - name: display_name
        type: string

      - name: motto
        type: string
